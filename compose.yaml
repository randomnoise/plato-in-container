services:
  plato-builder:
    build:
      context: ./plato
      dockerfile: ../gcc-linaro-builder.Dockerfile
    image: local-plato-gcc-linaro-builder
    volumes:
      - ./dist:/usr/src/plato/dist

  plato-emulator:
    build:
      context: ./plato
      dockerfile: ../emulator.Dockerfile
    image: local-plato-emulator
    devices:
      - dev/dri
    environment:
      - DISPLAY=unix${DISPLAY}
    network_mode: "host"
    volumes:
      - ~/.Xauthority:/root/.Xauthority

  debian-repo-builder:
    build:
      context: ./plato
      dockerfile: ../debian-repo-builder.Dockerfile
    image: local-debian-repo-plato-builder
    volumes:
      - ./dist:/usr/src/plato/dist
